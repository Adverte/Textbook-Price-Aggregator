{% extends "base.html" %}

{% block head %}
<script type="text/javascript">
$(function () {
   $.ajax({
       url:'{{url}}',
       success: function(data) { output_textbook(data,'div#textbook'); },
       dataType: 'json'
   });
});

function output_textbook(data, selector)
{
        var container_id = 'textbook_info';
        var container_sel = '#' + container_id;

        $('<div id="'+container_id+'" />').hover(function() {
            $(this).addClass('highlight').css('background','orange');
        }, function() {
            $(this).removeClass('highlight').css('background','');
        }).addClass('clickable')
          .appendTo(selector);

        var imghtml = '<img class="bookimage" src="' + data.imageurl +'"></img>';
        var linkhtml = '<a href="' + data.url +'">' + data.title + '</a>';
        $(imghtml+linkhtml).appendTo(container_sel);

        $('<hr />').appendTo(selector);
        $("div.clickable").click( function() {
            window.location = $(this).children('a').attr('href');
            return false;
        });
}
</script>
{% endblock head %}

{% block content %}
<div id="textbook"></div>
<div id="listings"></div>
{% endblock %}